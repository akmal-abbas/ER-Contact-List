<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Emergency Response Coordinator Checklist ‚Äì Safety Senior Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 800px;
      margin: auto;
    }
    h1 {
      color: darkred;
      font-size: 1.4em;
      text-align: center;
    }
    label {
      display: block;
      margin: 10px 0 5px;
      font-size: 1rem;
    }
    input[type="checkbox"] {
      margin-right: 10px;
      transform: scale(1.2);
    }
    .remark {
      display: none;
      margin-bottom: 15px;
    }
    textarea {
      width: 100%;
      padding: 8px;
      font-size: 0.95rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      resize: vertical;
    }
    .button-group {
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    button {
      padding: 10px 20px;
      background: darkred;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
    }
    button:hover {
      background-color: #a60000;
    }
  </style>
</head>
<body>

<h1>Emergency Response Coordinator Checklist ‚Äì Safety Senior Manager</h1>

<form id="checklistForm">
  <div id="checklistContainer"></div>

  <div class="button-group">
    <button type="button" onclick="saveToPDF()">üíæ Save to PDF</button>
    <button type="button" onclick="clearProgress()">üóëÔ∏è Clear Saved Progress</button>
  </div>
</form>

<script>
  const checklistItems = [
    "1. Report to EMC upon notification of the ERP.",
    "2. Ensure EMC is activated and Status Board filled.",
    "3. Verify CMT members' attendance.",
    "4. Attend briefing from Divisions/Departments.",
    "5. Use Appendix C from OCC to log activities.",
    "6. Establish EMC communications. Use emc@ascendairwaysmy.aero.",
    "7. Confirm with EM and activate DMS.",
    "8. Distribute EM-approved documents to stakeholders.",
    "9. HR to arrange Go Team travel & caregivers.",
    "10. Follow up with DMS and update EM regularly.",
    "11. Update victim/casualty counts on Status Board.",
    "12. Communicate with PMA / Go Team / DMS.",
    "13. Arrange refreshments for EMC personnel.",
    "14. Carry out any tasks assigned by EM."
  ];

  const checklistContainer = document.getElementById("checklistContainer");

  checklistItems.forEach((text, i) => {
    const checkboxId = `check${i}`;
    const remarkId = `remark${i}`;

    const label = document.createElement("label");
    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.id = checkboxId;
    checkbox.onchange = () => {
      localStorage.setItem(checkboxId, checkbox.checked);
      toggleRemark(checkbox, remarkDiv);
    };

    label.appendChild(checkbox);
    label.appendChild(document.createTextNode(text));

    const remarkDiv = document.createElement("div");
    remarkDiv.className = "remark";
    const textarea = document.createElement("textarea");
    textarea.placeholder = `Remark for Item ${i + 1}...`;
    textarea.id = remarkId;
    textarea.oninput = () => {
      localStorage.setItem(remarkId, textarea.value);
    };
    remarkDiv.appendChild(textarea);

    checklistContainer.appendChild(label);
    checklistContainer.appendChild(remarkDiv);
  });

  function toggleRemark(checkbox, remarkDiv) {
    remarkDiv.style.display = checkbox.checked ? "block" : "none";
  }

  window.onload = () => {
    checklistItems.forEach((_, i) => {
      const checkbox = document.getElementById(`check${i}`);
      const remark = document.getElementById(`remark${i}`);
      const remarkDiv = remark.parentElement;

      const savedCheck = localStorage.getItem(`check${i}`);
      const savedRemark = localStorage.getItem(`remark${i}`);

      if (savedCheck === "true") {
        checkbox.checked = true;
        remarkDiv.style.display = "block";
      }

      if (savedRemark) {
        remark.value = savedRemark;
      }
    });
  };

  function clearProgress() {
    if (confirm("Clear all saved checklist progress?")) {
      checklistItems.forEach((_, i) => {
        localStorage.removeItem(`check${i}`);
        localStorage.removeItem(`remark${i}`);
        const checkbox = document.getElementById(`check${i}`);
        const remark = document.getElementById(`remark${i}`);
        const remarkDiv = remark.parentElement;
        checkbox.checked = false;
        remark.value = "";
        remarkDiv.style.display = "none";
      });
    }
  }

  function saveToPDF() {
    let html = `<h2>Emergency Response Coordinator Checklist</h2><ul>`;
    checklistItems.forEach((text, i) => {
      const checkbox = document.getElementById(`check${i}`);
      const remark = document.getElementById(`remark${i}`).value.trim();
      if (checkbox.checked) {
        html += `<li>${text}${remark ? " - Remark: " + remark : ""}</li>`;
      }
    });
    html += `</ul>`;

    const printWindow = window.open('', '', 'width=800,height=800');
    printWindow.document.write(`
      <html>
      <head><title>Emergency Response Coordinator Checklist PDF</title></head>
      <body>
        ${html}
        <script>
          window.onload = function() { window.print(); };
        <\/script>
      </body>
      </html>
    `);
    printWindow.document.close();
  }
</script>

</body>
</html>
